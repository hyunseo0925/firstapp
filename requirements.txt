plotly
import streamlit as st
import plotly.graph_objects as go

st.set_page_config(page_title="미연과 사귈 확률 계산기", page_icon="💖")
st.title("💖 미연과 사귈 확률 계산기")
st.write("이건 재미로 보는 가상 분석입니다. 너무 진지하게 받아들이지 마세요 😉")

# 사용자 입력
looks = st.slider("외모 자신감 점수 (0~100)", 0, 100, 50)
skill = st.slider("음악/댄스 실력 점수 (0~100)", 0, 100, 50)
humor = st.slider("유머 감각 점수 (0~100)", 0, 100, 50)
mbti_match = st.radio("MBTI 궁합이 맞나요? (INFP 기준)", ["Yes", "No"])
meeting_chance = st.slider("실제 만남 가능성 (0~10)", 0, 10, 2)

# 확률 계산 (가상 알고리즘)
score = (looks * 0.25 + skill * 0.2 + humor * 0.25 + meeting_chance * 10)
if mbti_match == "Yes":
    score += 10  # MBTI 궁합 보너스

# 100을 넘지 않게 제한
score = min(round(score, 1), 100)

# Plotly 게이지 차트
fig = go.Figure(go.Indicator(
    mode="gauge+number",
    value=score,
    title={'text': "미연과 사귈 확률 (%)"},
    gauge={
        'axis': {'range': [0, 100]},
        'bar': {'color': "hotpink"},
        'steps': [
            {'range': [0, 30], 'color': "#ffeeee"},
            {'range': [30, 70], 'color': "#ffcccc"},
            {'range': [70, 90], 'color': "#ff99cc"},
            {'range': [90, 100], 'color': "#ff66cc"}
        ],
    }
))

st.plotly_chart(fig)

# 한 마디 멘트
if score >= 90:
    st.success("✨ 미연이랑... 운명일지도...? ✨")
elif score >= 70:
    st.info("가능성 있어! 팬싸 준비하자!")
elif score >= 40:
    st.warning("조금 더 노력해볼까?")
else:
    st.error("그래도 팬으로 응원하면 좋잖아!")

